{"ast":null,"code":"import React,{useEffect,useState}from'react';import{jwtDecode}from\"jwt-decode\";import{Link}from'react-router-dom';import useUserData from'./userdata';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";let userdata={};function Signin(){const[isUser,setIsUser]=useState(false);;// const apiBaseUrl = process.env.NODE_ENV === 'production'\n// ? 'https://alias-node-9851227f2446.herokuapp.com/node'\n// : 'http://localhost:5433';\nconsole.log('test');console.log('NODE_ENV:',process.env.REACT_APP_NODE_ENV);console.log('test2');function handleCallbackResponse(response){/*c onsole.log(response.credential); */var userObject=jwtDecode(response.credential);/*console.log(userObject); */console.log(userObject.email);fetch(\"https://alias-node-9851227f2446.herokuapp.com/checkUser?email=\".concat(userObject.email))// replace with the actual email\n.then(response=>response.json())// Try parsing response as JSON\n/* if (response.ok) {\r\n          setIsUser(true); // Set state to allow the button to be clickable\r\n          localStorage.setItem('loggedIn', 'true'); // Store logged-in status in local storage\r\n          userdata = userObject;\r\n\r\n        } else {\r\n          setIsUser(false); // Set state to disable the button\r\n          localStorage.setItem('loggedIn', 'false'); // Store logged-in status in local storage\r\n        }\r\n            })\r\n  \r\n        */.then(data=>{console.log('Data:',data);if(data.token){console.log('Token:',data.token);// Log the token received\nlocalStorage.setItem('loggedIn','true');// Store logged-in status in local storage\nsessionStorage.setItem('token',data.token);// Store the token in session storage\nfetch(\"https://alias-testing-130265f16331.herokuapp.com/initialize_agents?email=\".concat(userObject.email)).then(response=>{if(!response.ok){throw new Error(\"HTTP error! Status: \".concat(response.status));}return response.text();}).then(data=>{console.log('Response:',data);}).catch(error=>{console.error('Error initializing agent:',error);});// Further use the token as needed\n}else{console.error('No token received');}}).catch(error=>{console.error('Error:',error);});}console.log(userdata);useEffect(()=>{const loggedInStatus=localStorage.getItem('loggedIn');setIsUser(loggedInStatus==='true');/* global google */google.accounts.id.initialize({client_id:\"822420183545-p950fdql2o6ls85egkd47gtf4a6tujcc.apps.googleusercontent.com\",callback:handleCallbackResponse});google.accounts.id.renderButton(document.getElementById(\"gbutton\"),{theme:\"outline\",size:\"large\",innerWidth:\"400px\"});},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"accountc\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8 pd account\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"./aliaslogodarksvg.svg\",alt:\"\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Sign in to your Alias account\"}),/*#__PURE__*/_jsx(\"div\",{id:\"gbutton\",children:/*#__PURE__*/_jsxs(\"button\",{children:[/*#__PURE__*/_jsx(\"img\",{src:\"./google.png\",alt:\"\"}),\" \",/*#__PURE__*/_jsx(\"span\",{children:\"Sign in with Google\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"signinbeta\",children:/*#__PURE__*/_jsx(\"h6\",{children:\"By signing in, you agree to our Beta Test policy.\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"signinbetanew\",children:/*#__PURE__*/_jsx(Link,{to:isUser?'/home':'#',children:/*#__PURE__*/_jsx(\"button\",{disabled:!isUser,children:\"Sign in\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 bluebg\"})]})})})});}export default Signin;export{userdata};","map":{"version":3,"names":["React","useEffect","useState","jwtDecode","Link","useUserData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","userdata","Signin","isUser","setIsUser","console","log","process","env","REACT_APP_NODE_ENV","handleCallbackResponse","response","userObject","credential","email","fetch","concat","then","json","data","token","localStorage","setItem","sessionStorage","ok","Error","status","text","catch","error","loggedInStatus","getItem","google","accounts","id","initialize","client_id","callback","renderButton","document","getElementById","theme","size","innerWidth","children","className","src","alt","to","disabled"],"sources":["/Users/kanshruti/Documents/GitHub/Social_Symbiote/src/componets/Signin.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport { Link } from 'react-router-dom';\r\nimport useUserData from './userdata';\r\n\r\n\r\n\r\nlet userdata = {};\r\n\r\nfunction Signin() {\r\n  const [isUser, setIsUser] = useState(false);;\r\n\r\n  // const apiBaseUrl = process.env.NODE_ENV === 'production'\r\n  // ? 'https://alias-node-9851227f2446.herokuapp.com/node'\r\n  // : 'http://localhost:5433';\r\n\r\n  console.log('test')\r\n  console.log('NODE_ENV:', process.env.REACT_APP_NODE_ENV);\r\n  console.log('test2')\r\n  \r\n  function handleCallbackResponse(response) {\r\n    /*c onsole.log(response.credential); */\r\n    var userObject = jwtDecode(response.credential);\r\n    /*console.log(userObject); */\r\n    console.log(userObject.email); \r\n\r\n    fetch(`https://alias-node-9851227f2446.herokuapp.com/checkUser?email=${userObject.email}`) // replace with the actual email\r\n      .then((response) => response.json()) // Try parsing response as JSON\r\n        /* if (response.ok) {\r\n          setIsUser(true); // Set state to allow the button to be clickable\r\n          localStorage.setItem('loggedIn', 'true'); // Store logged-in status in local storage\r\n          userdata = userObject;\r\n\r\n        } else {\r\n          setIsUser(false); // Set state to disable the button\r\n          localStorage.setItem('loggedIn', 'false'); // Store logged-in status in local storage\r\n        }\r\n            })\r\n  \r\n        */\r\n\r\n      .then((data) => {\r\n        console.log('Data:', data);\r\n        if (data.token) {\r\n          console.log('Token:', data.token); // Log the token received\r\n          localStorage.setItem('loggedIn', 'true'); // Store logged-in status in local storage\r\n          sessionStorage.setItem('token', data.token); // Store the token in session storage\r\n          fetch(`https://alias-testing-130265f16331.herokuapp.com/initialize_agents?email=${userObject.email}`)\r\n          .then((response) => {\r\n            if (!response.ok) {\r\n              throw new Error(`HTTP error! Status: ${response.status}`);\r\n            }\r\n            return response.text();\r\n          })\r\n          .then((data) => {\r\n            console.log('Response:', data);\r\n          })\r\n          .catch((error) => {\r\n            console.error('Error initializing agent:', error);\r\n          });\r\n          // Further use the token as needed\r\n        } else {\r\n          console.error('No token received');\r\n        }\r\n      })\r\n\r\n      .catch((error) => {\r\n        console.error('Error:', error);\r\n      });\r\n \r\n  \r\n  }\r\n\r\n  console.log(userdata);\r\n\r\n  useEffect(() => {\r\n\r\n    const loggedInStatus = localStorage.getItem('loggedIn');\r\n    setIsUser(loggedInStatus === 'true');\r\n\r\n    /* global google */\r\n    google.accounts.id.initialize({\r\n      client_id: \"822420183545-p950fdql2o6ls85egkd47gtf4a6tujcc.apps.googleusercontent.com\",\r\n      callback: handleCallbackResponse\r\n    })\r\n\r\n    google.accounts.id.renderButton(\r\n      document.getElementById(\"gbutton\"),\r\n      {theme: \"outline\", size: \"large\", innerWidth: \"400px\"}\r\n    )\r\n\r\n  }, []);\r\n  \r\n\r\n  return (\r\n    <>\r\n    <div className=\"container-fluid\">\r\n        <div className=\"accountc\">\r\n        \r\n        <div className=\"row\">\r\n            <div className=\"col-md-8 pd account\">\r\n            <img src=\"./aliaslogodarksvg.svg\" alt=\"\" />\r\n            <h2>Sign in to your Alias account</h2>\r\n            <div id=\"gbutton\">\r\n                <button><img src=\"./google.png\" alt=\"\" /> <span>Sign in with Google</span></button>\r\n                \r\n            </div>\r\n            \r\n            <div className=\"signinbeta\">\r\n              <h6>By signing in, you agree to our Beta Test policy.</h6>\r\n            </div>  \r\n\r\n\r\n            <div className=\"signinbetanew\">\r\n              \r\n              <Link to={isUser ? '/home' : '#'}>\r\n                <button disabled={!isUser}>Sign in</button>\r\n              </Link>  \r\n            </div>\r\n\r\n\r\n            {/* \r\n            <div className=\"or\">\r\n            <p>&nbsp; &nbsp; Or, sign up with email &nbsp; &nbsp; </p>\r\n            <div className=\"form\">\r\n              <label htmlFor=\"Full Name\">Email Address</label><br></br>\r\n              <input type=\"email\" placeholder='e.g example@company.com'/><br></br>\r\n\r\n              <label htmlFor=\"Full Name\">Password</label><br></br>\r\n              <input type=\"password\" placeholder='Set Password'/>\r\n              <div className=\"signin\">\r\n                  <button>Sign in</button>\r\n              </div>\r\n              <h6>Already have an account? Sign in</h6>\r\n            </div>\r\n\r\n            </div>\r\n            */}\r\n              </div>\r\n              <div className=\"col-md-4 bluebg\">\r\n              </div>\r\n        </div>\r\n        </div>\r\n    </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Signin;\r\nexport { userdata };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}