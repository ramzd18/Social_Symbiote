{"ast":null,"code":"import React,{useEffect,useState}from'react';import{jwtDecode}from\"jwt-decode\";import{Link}from'react-router-dom';import useUserData from'./userdata';import CircularProgress from'@mui/material/CircularProgress';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";let userdata={};function Signin(){const[isUser,setIsUser]=useState(false);;const[isInitialized,setisInitialized]=useState(false);// const apiBaseUrl = process.env.NODE_ENV === 'production'\n// ? 'https://alias-node-9851227f2446.herokuapp.com/node'\n// : 'http://localhost:5433';\nconsole.log('test');console.log('NODE_ENV:',process.env.REACT_APP_NODE_ENV);console.log('test2');function handleCallbackResponse(response){/*c onsole.log(response.credential); */var userObject=jwtDecode(response.credential);/*console.log(userObject); */console.log(userObject.email);setisInitialized(true);fetch(\"https://alias-node-9851227f2446.herokuapp.com/checkUser?email=\".concat(userObject.email))// replace with the actual email\n.then(response=>response.json())// Try parsing response as JSON\n/* if (response.ok) {\r\n          setIsUser(true); // Set state to allow the button to be clickable\r\n          localStorage.setItem('loggedIn', 'true'); // Store logged-in status in local storage\r\n          userdata = userObject;\r\n\r\n        } else {\r\n          setIsUser(false); // Set state to disable the button\r\n          localStorage.setItem('loggedIn', 'false'); // Store logged-in status in local storage\r\n        }\r\n            })\r\n  \r\n        */.then(data=>{console.log('Data:',data);if(data.token){console.log('Token:',data.token);// Log the token received\nlocalStorage.setItem('loggedIn','true');// Store logged-in status in local storage\nsessionStorage.setItem('token',data.token);// Store the token in session storage\nfetch(\"https://alias-testing-130265f16331.herokuapp.com/initialize_agents?email=\".concat(userObject.email)).then(response=>{if(!response.ok){throw new Error(\"HTTP error! Status: \".concat(response.status));}return response.text();}).then(data=>{console.log('Response:',data);const checkInitialization=()=>{fetch(\"https://alias-testing-130265f16331.herokuapp.com/check?key=initial\").then(response=>response.json()).then(data=>{if(data&&data.status==='finished'){setisInitialized(false);}else{setTimeout(checkInitialization,1000);}}).catch(error=>{console.error('Error:',error);});};// Start the recursive call\ncheckInitialization();}).catch(error=>{console.error('Error initializing agent:',error);});// Further use the token as needed\n}else{console.error('No token received');}}).catch(error=>{console.error('Error:',error);});}console.log(userdata);useEffect(()=>{const loggedInStatus=localStorage.getItem('loggedIn');setIsUser(loggedInStatus==='true');/* global google */google.accounts.id.initialize({client_id:\"822420183545-p950fdql2o6ls85egkd47gtf4a6tujcc.apps.googleusercontent.com\",callback:handleCallbackResponse});google.accounts.id.renderButton(document.getElementById(\"gbutton\"),{theme:\"outline\",size:\"large\",innerWidth:\"400px\"});},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"accountc\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8 pd account\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"./aliaslogodarksvg.svg\",alt:\"\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Sign in to your Alias account\"}),/*#__PURE__*/_jsx(\"div\",{id:\"gbutton\",children:/*#__PURE__*/_jsxs(\"button\",{children:[/*#__PURE__*/_jsx(\"img\",{src:\"./google.png\",alt:\"\"}),\" \",/*#__PURE__*/_jsx(\"span\",{children:\"Sign in with Google\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"signinbeta\",children:/*#__PURE__*/_jsx(\"h6\",{children:\"By signing in, you agree to our Beta Test policy.\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"signinbetanew\",children:/*#__PURE__*/_jsx(Link,{to:isUser?'/home':'#',children:/*#__PURE__*/_jsx(\"button\",{disabled:!isUser,children:isInitialized?/*#__PURE__*/_jsx(CircularProgress,{size:24,color:\"inherit\"}):'Sign in'})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 bluebg\"})]})})})});}export default Signin;export{userdata};","map":{"version":3,"names":["React","useEffect","useState","jwtDecode","Link","useUserData","CircularProgress","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","userdata","Signin","isUser","setIsUser","isInitialized","setisInitialized","console","log","process","env","REACT_APP_NODE_ENV","handleCallbackResponse","response","userObject","credential","email","fetch","concat","then","json","data","token","localStorage","setItem","sessionStorage","ok","Error","status","text","checkInitialization","setTimeout","catch","error","loggedInStatus","getItem","google","accounts","id","initialize","client_id","callback","renderButton","document","getElementById","theme","size","innerWidth","children","className","src","alt","to","disabled","color"],"sources":["/Users/kanshruti/Documents/GitHub/Social_Symbiote/src/componets/Signin.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport { Link } from 'react-router-dom';\r\nimport useUserData from './userdata';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\n\r\n\r\nlet userdata = {};\r\n\r\nfunction Signin() {\r\n  const [isUser, setIsUser] = useState(false);;\r\n  const [isInitialized, setisInitialized] = useState(false);\r\n\r\n  // const apiBaseUrl = process.env.NODE_ENV === 'production'\r\n  // ? 'https://alias-node-9851227f2446.herokuapp.com/node'\r\n  // : 'http://localhost:5433';\r\n\r\n  console.log('test')\r\n  console.log('NODE_ENV:', process.env.REACT_APP_NODE_ENV);\r\n  console.log('test2')\r\n  \r\n  function handleCallbackResponse(response) {\r\n    /*c onsole.log(response.credential); */\r\n    var userObject = jwtDecode(response.credential);\r\n    /*console.log(userObject); */\r\n    console.log(userObject.email); \r\n\r\n    setisInitialized(true);\r\n\r\n    fetch(`https://alias-node-9851227f2446.herokuapp.com/checkUser?email=${userObject.email}`) // replace with the actual email\r\n      .then((response) => response.json()) // Try parsing response as JSON\r\n        /* if (response.ok) {\r\n          setIsUser(true); // Set state to allow the button to be clickable\r\n          localStorage.setItem('loggedIn', 'true'); // Store logged-in status in local storage\r\n          userdata = userObject;\r\n\r\n        } else {\r\n          setIsUser(false); // Set state to disable the button\r\n          localStorage.setItem('loggedIn', 'false'); // Store logged-in status in local storage\r\n        }\r\n            })\r\n  \r\n        */\r\n\r\n      .then((data) => {\r\n        console.log('Data:', data);\r\n        if (data.token) {\r\n          console.log('Token:', data.token); // Log the token received\r\n          localStorage.setItem('loggedIn', 'true'); // Store logged-in status in local storage\r\n          sessionStorage.setItem('token', data.token); // Store the token in session storage\r\n          fetch(`https://alias-testing-130265f16331.herokuapp.com/initialize_agents?email=${userObject.email}`)\r\n          .then((response) => {\r\n            if (!response.ok) {\r\n              throw new Error(`HTTP error! Status: ${response.status}`);\r\n            }\r\n            return response.text();\r\n          })\r\n          .then((data) => {\r\n            console.log('Response:', data);\r\n            const checkInitialization = () => {\r\n              fetch(`https://alias-testing-130265f16331.herokuapp.com/check?key=initial`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                  if (data && data.status === 'finished') {\r\n                    setisInitialized(false);\r\n                  } else {\r\n                    setTimeout(checkInitialization, 1000);\r\n                  }\r\n                })\r\n                .catch((error) => {\r\n                  console.error('Error:', error);\r\n                });\r\n            };\r\n\r\n            // Start the recursive call\r\n            checkInitialization();\r\n          })\r\n          .catch((error) => {\r\n            console.error('Error initializing agent:', error);\r\n          });\r\n          // Further use the token as needed\r\n        } else {\r\n          console.error('No token received');\r\n        }\r\n      })\r\n\r\n\r\n      .catch((error) => {\r\n        console.error('Error:', error);\r\n      });\r\n \r\n  \r\n  }\r\n\r\n  console.log(userdata);\r\n\r\n  useEffect(() => {\r\n\r\n    const loggedInStatus = localStorage.getItem('loggedIn');\r\n    setIsUser(loggedInStatus === 'true');\r\n\r\n    /* global google */\r\n    google.accounts.id.initialize({\r\n      client_id: \"822420183545-p950fdql2o6ls85egkd47gtf4a6tujcc.apps.googleusercontent.com\",\r\n      callback: handleCallbackResponse\r\n    })\r\n\r\n    google.accounts.id.renderButton(\r\n      document.getElementById(\"gbutton\"),\r\n      {theme: \"outline\", size: \"large\", innerWidth: \"400px\"}\r\n    )\r\n\r\n  }, []);\r\n  \r\n\r\n  return (\r\n    <>\r\n    <div className=\"container-fluid\">\r\n        <div className=\"accountc\">\r\n        \r\n        <div className=\"row\">\r\n            <div className=\"col-md-8 pd account\">\r\n            <img src=\"./aliaslogodarksvg.svg\" alt=\"\" />\r\n            <h2>Sign in to your Alias account</h2>\r\n            <div id=\"gbutton\">\r\n                <button><img src=\"./google.png\" alt=\"\" /> <span>Sign in with Google</span></button>\r\n                \r\n            </div>\r\n            \r\n            <div className=\"signinbeta\">\r\n              <h6>By signing in, you agree to our Beta Test policy.</h6>\r\n            </div>  \r\n\r\n\r\n            <div className=\"signinbetanew\">\r\n              \r\n              <Link to={isUser ? '/home' : '#'}>\r\n                <button disabled={!isUser}>\r\n                {isInitialized ? (\r\n                <CircularProgress size={24} color=\"inherit\" />\r\n                ) : ( \r\n                  'Sign in'\r\n                )}\r\n                </button>\r\n              </Link>  \r\n            </div>\r\n\r\n\r\n            {/* \r\n            <div className=\"or\">\r\n            <p>&nbsp; &nbsp; Or, sign up with email &nbsp; &nbsp; </p>\r\n            <div className=\"form\">\r\n              <label htmlFor=\"Full Name\">Email Address</label><br></br>\r\n              <input type=\"email\" placeholder='e.g example@company.com'/><br></br>\r\n\r\n              <label htmlFor=\"Full Name\">Password</label><br></br>\r\n              <input type=\"password\" placeholder='Set Password'/>\r\n              <div className=\"signin\">\r\n                  <button>Sign in</button>\r\n              </div>\r\n              <h6>Already have an account? Sign in</h6>\r\n            </div>\r\n\r\n            </div>\r\n            */}\r\n              </div>\r\n              <div className=\"col-md-4 bluebg\">\r\n              </div>\r\n        </div>\r\n        </div>\r\n    </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Signin;\r\nexport { userdata };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}